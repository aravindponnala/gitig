{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>pet detail second visit</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel=”stylesheet” href=”css/bootstrap-responsive.css”>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Bangers|Titillium+Web" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">


</head>
<style>
    .row:before,
    .row:after {
        display: inline-block !important;
    }

    html,
    body {
        margin: 0%;
        padding: 0%;
        overflow-x: hidden;
    }


    body {
        /* Set "my-sec-counter" to 0 */
        counter-reset: my-sec-counter;
    }





    .overlay {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: white;
        background-color: white;
        overflow-x: hidden;
        transition: 0.3s;
    }

    .overlay-content {
        position: absolute;
        top: 100px;
        width: 100%;
        text-align: center;
        margin-top: 20px;
    }

    .overlay a {
        padding: 8px;
        text-decoration: none;

        color: #818181;
        display: block;
        transition: 0.3s;
    }

    .overlay a:hover,
    .overlay a:focus {
        color: #f1f1f1;
    }

    .overlay .closebtn {
        position: absolute;

        margin-left: 200px;
        font-size: 40px;
        color: #1f7a1f;
    }

    /* Extra small devices (phones, 600px and down) */
    @media only screen and (max-width: 400px) {


        #grad1 {
            min-width: 100%;
            min-height: 100vh;
            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #pet_detail_list_card {

            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

        #pet_profile {
            font-size: 16px;
            color: #003300;
        }


        #vaccination_history {
            font-size: 16px;
            color: #003300;
        }

        #deworming_history {
            font-size: 16px;
            color: #003300;
        }

        #previous_visit {
            font-size: 16px;
            color: #003300;
        }

        #about_us {
            font-size: 16px;
            color: #003300;
        }

        #span_id {
            color: #003300;
        }

        #pet_name {

            margin-top: 8px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }




        #breed {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #age {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #gender {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }

        #proceed_to_purpose_of_the_visit {

            float: right;
            background-color: #003300;
            color: white;
        }

        #add_another_pet {

            float: left;
            background-color: #003300;
            color: white;
        }

        #back_button_id {}

        #img_id {
            width: 70px;
            height: 70px;
            border-radius: 50%;
        }

        #circle_id {
            height: 70px;
            width: 70px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }
    }

    /* Extra small devices (phones, 600px and down) */
    @media only screen and (max-width: 600px) {


        #grad1 {
            min-width: 100%;
            min-height: 100vh;

            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #pet_detail_list_card {

            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

        #pet_profile {
            font-size: 16px;
            color: #003300;
        }


        #vaccination_history {
            font-size: 16px;
            color: #003300;
        }

        #deworming_history {
            font-size: 16px;
            color: #003300;
        }

        #previous_visit {
            font-size: 16px;
            color: #003300;
        }

        #about_us {
            font-size: 16px;
            color: #003300;
        }

        #span_id {
            color: #003300;
        }

        #pet_name {

            margin-top: 8px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }




        #breed {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #age {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #gender {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }

        #proceed_to_purpose_of_the_visit {

          float: right;
            background-color: #003300;
            color: white;
        }

        #add_another_pet {
            float: left;
            background-color: #003300;
            color: white;
        }

        #back_button_id {}

        #img_id {
            width: 70px;
            height: 70px;
            border-radius: 50%;
        }

        #circle_id {
            height: 70px;
            width: 70px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }
    }

    /* Small devices (portrait tablets and large phones, 600px and up) */
    @media only screen and (min-width: 600px) {
        #grad1 {
            min-width: 100%;
            min-height: 100vh;
            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        #add_another_pet {
            float: left;
            background-color: #003300;
            color: white;
        }

        #back_button_id {}

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #pet_detail_list_card {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

   

        #img_id {
            width: 70px;
            height: 70px;
            border-radius: 50%;
        }

        #circle_id {
            height: 70px;
            width: 70px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }

        #proceed_to_purpose_of_the_visit {

            margin-left: 73%;
            background-color: #003300;
            color: white;
        }

        #pet_profile {
            font-size: 16px;
            color: #003300;
        }


        #vaccination_history {
            font-size: 16px;
            color: #003300;
        }

        #deworming_history {
            font-size: 16px;
            color: #003300;
        }

        #previous_visit {
            font-size: 16px;
            color: #003300;
        }

        #about_us {
            font-size: 16px;
            color: #003300;
        }

        #span_id {
            color: #003300;
        }

        #pet_name {

            margin-top: 8px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }




        #breed {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #age {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #gender {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }

        #close_btn {

            margin-left: 80%;
            color: 003300;
        }

        #back_button_id {}
    }

    /* Medium devices (landscape tablets, 768px and up) */
    @media only screen and (min-width: 768px) {
        #grad1 {
            min-width: 100%;
            min-height: 100vh;

            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        #add_another_pet {
            float: left;
            background-color: #003300;
            color: white;
        }

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #pet_detail_list_card {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

        #proceed_to_purpose_of_the_visit {


            margin-left: 80%;
            background-color: #003300;
            color: white;


        }

        #pet_profile {
            font-size: 16px;
            color: #003300;
        }


        #vaccination_history {
            font-size: 16px;
            color: #003300;
        }

        #deworming_history {
            font-size: 16px;
            color: #003300;
        }

        #previous_visit {
            font-size: 16px;
            color: #003300;
        }

        #about_us {
            font-size: 16px;
            color: #003300;
        }

        #span_id {
            color: #003300;
        }

        #pet_name {

            margin-top: 8px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }




        #breed {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #age {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;
        }

        #gender {

            margin-top: 4px;
            color: #003300;
            font-size: 16px;
            font-weight: bold;

        }

        #img_id {
            width: 70px;
            height: 70px;
            border-radius: 50%;
        }

        #circle_id {
            height: 70px;
            width: 70px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }

        #close_btn {

            margin-left: 80%;
            color: 003300;
        }

        #back_button_id {}
    }

    /* Large devices (laptops/desktops, 992px and up) */
    @media only screen and (min-width: 992px) {
        body {
            overflow-x: hidden;
        }

        #grad1 {
            min-width: 100%;
            min-height: 100vh;
            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #add_another_pet {
            float: right;
            background-color: #003300;
            color: white;
        }

        #pet_name {
            color: #003300;
        }

        #breed {
            color: #003300;
        }

        #age {
            color: #003300;
        }

        #gender {
            color: #003300;
        }



        #symbol_id {
            margin-left: 1%;
        }

        #symbol_id2 {
            margin-left: 1%;
        }

        #proceed_to_purpose_of_the_visit {
            margin-left: 60%;
            background-color: #003300;
            color: white;

        }

        #pet_detail_list_card {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

        #pet_profile {
            font-size: 16px;
            color: #003300;

        }

        #blog {

            font-size: 16px;
            color: #003300;

        }

        #vaccination_history {
            font-size: 16px;
            color: #003300;

        }

        #deworming_history {
            font-size: 16px;
            color: #003300;

        }

        #previous_visit {
            font-size: 16px;
            color: #003300;

        }

        #about_us {

            width: 100%;
            font-size: 16px;
            color: #003300;

        }

        #pet_detail_list_card {
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        #close_btn {
            margin-left: 75%;

            color: 003300;
        }

        #img_id {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }

        #circle_id {
            height: 50px;
            width: 50px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }

        #back_button_id {}
    }

    /* Extra large devices (large laptops and desktops, 1200px and up) */
    @media only screen and (min-width: 1200px) {
        #grad1 {
            min-width: 100%;
            min-height: 100vh;
            filter: brightness(100%);
            background-color: lightgrey;
            /* For browsers that do not support gradients */
            background-image: linear-gradient(to right, white, lightgrey);
            /* Standard syntax (must be last) */
        }

        body {
            overflow-x: hidden;

        }

        #heading_div {
            margin-left: auto;
            margin-right: auto;
            background-color: #003300;
            color: white;
            width: fit-content;
        }

        #heading_id {
            margin: 8px;
            padding: 4px;
        }

        #add_another_pet {
            float: right;
            background-color: #003300;
            color: white;
        }

        #pet_name {
            color: #003300;
        }

        #breed {
            color: #003300;
        }

        #age {
            color: #003300;
        }

        #gender {
            color: #003300;
        }


        #symbol_id {
            margin-left: 1%;
        }

        #symbol_id2 {
            margin-left: 1%;
        }

        #proceed_to_purpose_of_the_visit {


            margin-left: 60%;
            background-color: #003300;
            color: white;


        }

        #pet_detail_list_card {
            margin-left: auto;
            margin-right: auto;
            width: 45%;
        }

        #pet_profile {
            font-size: 16px;
            color: #003300;

        }

        #blog {

            font-size: 16px;
            color: #003300;

        }

        #vaccination_history {
            font-size: 16px;
            color: #003300;

        }

        #deworming_history {
            font-size: 16px;
            color: #003300;

        }

        #previous_visit {
            font-size: 16px;
            color: #003300;

        }

        #about_us {

            width: 100%;
            font-size: 16px;
            color: #003300;

        }




        #close_btn {

            margin-left: 80%;
            color: 003300;
        }

        #img_id {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }

        #circle_id {
            height: 50px;
            width: 50px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
        }


    }
</style>



<body>
    <input type="hidden" value="{{ customer_id }}" id="customer_id" name="customer_id">
    <div id="grad1">
        <div id="first_div">
            <div class="row">
                <div class="col-xs-2 col-sm-1 col-md-1 col-lg-2">
                    <div id="myNav" class="overlay">
                        <a href="javascript:void(0)" class="closebtn" id="close_btn" onclick="closeNav()">&times;</a>
                        <div class="overlay-content">
                            <li style="list-style: none"> <a class="list-group-item list-group-item-action " role="tab" id="pet_profile"
                                style="font-weight: bold;" href="{% url 'mypets' %}">
                                My pets
                              </a></li>
                            <li style="list-style: none"> <a class="list-group-item list-group-item-action " role="tab"
                                    id="about_us" style="font-weight: bold;" href="{% url 'aboutus' %}">About us</a>
                            </li>
                            <li style="list-style: none"> <a class="list-group-item list-group-item-action " role="tab"
                                    id="about_us" style="font-weight: bold;" href="{% url 'logout' %}">Sign out </a>
                            </li>
                        </div>
                    </div>
                    <span style="font-size:30px;cursor:pointer;" id="span_id" onclick="openNav()">&#9776;</span>

                </div>

                <div class="col-xs-8 col-sm-10 col-md-10 col-lg-8 m-0 p-0">
                    <div id="heading_div">
                        <h3 id="heading_id" style="  font-weight: bold;">PET DETAIL LIST</h3>
                    </div>


                </div>
                <div class="col-xs-2 col-sm-1 col-md-1 col-lg-2">
                </div>
            </div>


            <div class="container">
                <div class="row">
                    <div class="col-6 col-sm-6 col-md-6 col-lg-5 col-xl-4">
                        <input type="hidden" value="{{ doc_pk }}" id="doc_pk" name="doc_pk">
                        <a href="{% url 'addpet'  doc_pk=doc_pk %}"><button type="Submit"
                                class="btn btn" id="add_another_pet">Add another pet</button></a>
                    </div>
                    <div class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-5">

                        <a> <button type="button" class="btn btn"
                                style="background-color: #003300;color: white;width: fit-content;float: right;"
                                id="back_button_id" onclick="window.history.go(-1); return false;">Back</button>
                        </a>
                    </div>
                </div>
            </div>



            <div id="wrapper_id" class="wrapper mt-4">
                <div class="container" id="container_id">
                    {% for pet in pets%}
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" value="{{ pet.pet_id }}" name="petid" id="pet_obj_id">
                        <input type="hidden" value="{{ pet.pet_id }}" name="obj">
                        <div class="card" id="pet_detail_list_card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <a
                                            href="{% url 'pet_edit_details' customer_id=customer_id pet_id=pet.pet_id doc_pk=doc_pk %}">
                                            <i class="fa fa-pencil" style="float: right;"></i>
                                        </a>
                                    </div>
                                </div>

                                <h5 class="card-title"><b>Pet id: {{ pet.pet_id }}</b></h5>
                                {% for doc in doctorloglist %} {% if doc.pet_id.pet_id == pet.pet_id %}
                                <a style="background-color:lightgreen;"><span id='test'>Booked</span></a>
                                {% endif %}{% endfor %}
                                <div class="row">
                                    <div class="col-6 col-sm-6 col-lg-6">
                                        <label>Pet name:</label> {{ pet.name }}
                                        <input type="hidden" value="{{ pets.name }}" name="name">
                                    </div>
                                    <div class="col-6 col-sm-6 col-lg-6 p-0">
                                        <label>Breed:</label> {{ pet.breed }}
                                        <input type="hidden" value="{{ pets.breed }}" name="breed">
                                    </div>
                                </div>

                                <div class="row mt-1">
                                    <div class="col-6 col-sm-6 col-lg-6">
                                        <label class="">Gender:</label> {{ pet.gender }}
                                        <input type="hidden" value="{{ pets.gender }}" name="gender">
                                    </div>
                                    <div class="col-6 col-sm-6 col-lg-6 p-0">
                                        <label>Age:</label> {{pet.dob}}
                                        <input type="hidden" value="{{ pets.age }}" name="age">
                                    </div>
                                </div>

                            </div>
                        </div>
                        {% if pet.pet_id in x %}
                        <button type="Submit" hidden class="btn btn-success"
                            id="proceed_to_purpose_of_the_visit_hidden">Book consultation</button>
                        {% else %}
                        <button type="Submit" class="btn btn-success mb-3 mt-1"
                            id="proceed_to_purpose_of_the_visit">
                            Book consultation</button>

                        {% endif %}
                    </form>
                    {% endfor %}

                    <br>


                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script>



        function openNav() {
            if (window.matchMedia("(min-width: 993px)").matches) {
                document.getElementById("myNav").style.width = "29%";
            }
            else {
                document.getElementById("myNav").style.width = "75%";

            }
        }

        function closeNav() {
            document.getElementById("myNav").style.width = "0%";
        }

        function pet_name() {
            if (document.getElementById('show_div').style.display == 'none') {
                document.getElementById('show_div').style.display = 'inline-block';


            } else {
                document.getElementById('show_div').style.display = 'none';

            }
        }
        function Diet_type(data) {
            var gender = document.getElementById('diet_type').value;
            var gender_list = gender.split(',');
            console.log(gender_list);
            if (gender_list.includes(data.innerText)) {
                index = gender_list.indexOf(data.innerText);
                gender_list.splice(index, 1);
                data.style.backgroundColor = "white";
                data.style.color = "darkgreen";

            } else {
                gender_list.push(data.innerText);
                data.style.backgroundColor = "lightgreen";
                data.style.color = "black";
            }
            document.querySelector('#diet_type').value = gender_list.toString();
            console.log(gender_list.toString())
        }
        function set(data) {
            var set = document.getElementById('set_id').value;
            var gender_list = set.split(',');
            console.log(gender_list);
            if (gender_list.includes(data.innerText)) {
                index = gender_list.indexOf(data.innerText);
                gender_list.splice(index, 1);
                data.style.backgroundColor = "white";
                data.style.color = "darkgreen";

            } else {
                gender_list.push(data.innerText);
                data.style.backgroundColor = "lightgreen";
                data.style.color = "black";
            }
            document.querySelector('#set_id').value = gender_list.toString();

        }


        var obj_list = "{{ pets|safe }}";
        console.log(obj_list)
        var i;
        for (i = 0; i < obj_list.length; i++) {

        }


        // var data = new FormData();
        // var img = $('#camerasave')[0].files[0];
        // data.append('img', img);
        // $.ajax({
        //     url : "/petimage",
        //     processData : false,
        //     contentType : false,
        //     type : 'POST',
        //     data : JSON.stringify(data),
        // }).done(function(data) {
        //     // work with data
        // });




        function sav() {


            var fileInput = document.getElementById('camerasave');
            var file = fileInput.files[0];
            var formData = new FormData();
            formData.append('file', file);
            console.log(file)
            console.log(formData)
            $.ajax({
                url: "/petimage/",
                type: 'POST',
                processData: false,
                contentType: false,

                data: {
                    'test': 'test',
                    'imgBase64': file,


                    "csrfmiddlewaretoken": "{{ csrf_token }}",
                },
                success: function (json) {
                    console.log('h')
                }



            });



        }


  // jQuery.noConflict();
  // formdata = new FormData();
  // jQuery("#camerasave").on("change", function() {
  //   var file = this.files[0];

  //   if (formdata) {
  //     formdata.append("image", file);
  //     console.log(formdata)
  //     console.log(file)
  //     jQuery.ajax({
  //       url: "/petimage/",
  //       type: "POST",
  //       data :{
  //    'formdata': formdata,
  //    'test':'test',
  //     "csrfmiddlewaretoken" : "{{ csrf_token }}",
  //   } ,
  //       processData: false,
  //       contentType: false,
  //       success:function(){}
  //     });
  //   }
  // });

// var form = document.getElementById('the-form');
// form.onsubmit = function() {
//   var formData = new FormData(form);

//   formData.append('file', file);

//   var xhr = new XMLHttpRequest();
//   // Add any event handlers here...
//   xhr.open('POST', form.getAttribute('action'), true);
//   xhr.send(formData);
//   console.log(formData)

//   return false; // To avoid actual submission of the form
// }

    </script>
</body>

</html>